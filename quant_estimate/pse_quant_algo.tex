\documentclass{article}

\usepackage{algorithm,algpseudocode}

\algnewcommand{\algorithmicforeach}{\textbf{for each}}
\algdef{SE}[FOR]{ForEach}{EndForEach}[1]
{\algorithmicforeach\ #1\ \algorithmicdo}% \ForEach{#1}
{\algorithmicend\ \algorithmicforeach}% \EndForEach
\usepackage{listings}
\usepackage{xcolor} % for setting colors

% set the default code style
\lstset{
	frame=tb, % draw a frame at the top and bottom of the code block
	tabsize=4, % tab space width
	showstringspaces=false, % don't mark spaces in strings
	numbers=left, % display line numbers on the left
	commentstyle=\color{red}, % comment color
	keywordstyle=\color{blue}, % keyword color
	stringstyle=\color{gray} % string color
}

\begin{document}
\begin{lstlisting}[language=C++, caption={C++ code using listings}]
int main(void)
{
	int a, d;
	// forall variable
	klee_make_symbolic(&a, sizeof(a), "a_sym");
	// PSE variable : Uniformly distributed [0 to 650]
	make_pse_symbolic<int>(&d, sizeof(d), "d_prob_sym", 0, 650);
	int c = a + 100;
	
	// case 1 -> Pure Forall Predicate
	if (a > 50)	{
		c = a + 75;
	}	else	{
		c = a - 75;
	}
	
	// case 2 -> Pure PSE Predicate
	if (d > 60)
		d = 250;
	
	// case 3 -> Complex Case
	if (c > d)
		c = d;
	
	return 0;
}
\end{lstlisting}

\begin{algorithm}
    \caption{Complex Case : (Testing Based Estimation)}
    \begin{algorithmic}[1]
        \ForEach{$p \in Paths$}%
        \State c := ConstraintSet(p) \algorithmiccomment{Path Constraints for p}
        \State m := Solve(c) \algorithmiccomment{solution for the path constraints}
        \State forallConcreteSet = \{ \}
        	\ForEach{$v \in ForallVars(p)$}%
        	\State concreteSet.append(\{key : v, val : m[v]\}) \algorithmiccomment{forall values}
        	\EndForEach
        \State executeCV(program, concreteSet, c)
        \EndForEach
    \end{algorithmic}
\end{algorithm}

\begin{algorithm}
	\caption{Complex Case : (k-samples)}
	\begin{algorithmic}[1]
		\ForEach{$p \in Paths$}%
		\State c := ConstraintSet(p) \algorithmiccomment{Path Constraints for p}
		\State m := Solve(c) \algorithmiccomment{solution for the path constraints}
		\State forallConcreteSet = \{ \}
			\ForEach{$v \in ForallVars(p)$}%
			\State concreteSet.append(\{key : v, val : m[v]\}) \algorithmiccomment{forall values}
			\EndForEach
		\EndForEach
	\end{algorithmic}
\end{algorithm}

\begin{algorithm}[H]
	\caption{PSE Sampling Algorithm}
	\begin{algorithmic}[1]
		\Function{PSESample}{$\mathtt{x}, de, \varphi, \sigma, P, I$}
		\Let{$\delta$}{Generate an unused name for a probabilistic symbolic variable}
		\State{$P[\delta] = de$}
		\State{$I[\delta] = \{\delta\}$}
		\State{$\sigma[\mathtt{x}] = \delta$}
		\State\Return{$(\varphi,\sigma,P,I)$}
		\EndFunction
	\end{algorithmic}
\end{algorithm}

\end{document}